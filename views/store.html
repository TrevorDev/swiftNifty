{% extends 'layout.html' %}
{% block body %}
	    <div class="container-wide">
	    	<div class="row">
	    		<div class="col-lg-8 col-lg-offset-2">
	    			<h1>{{store.name}} - {{store.slogan}}</h1>
	    			<h2>Map</h2>
	    			<div style="height: 300px;width:100%" id="map-canvas"></div>
	    			<h2>Description</h2>
	    			<h4>{{store.description | escape |replace('\n', "<br>", 'g')|raw}}</h4>

	    			<h2>Products: </h2>
	    			<table class="table">
	    				<thead>
		    				<tr>
		    					<td>Name</td>
		    					<td>Description</td>
		    					<td>Price(CAD)</td>
		    				</tr>
	    				</thead>
						  {% for product in products %}
		    				<tr>
		    					<td>{{product.name}}</td>
		    					<td>{{product.description}}</td>
		    					<td>${{product.price.toFixed(2)}}</td>
		    				</tr>
		    			{% endfor %}
						</table>
	    			
	    		</div><!-- /col-lg-8 -->
	    	</div><!-- /row -->
			</div><!-- /hello -->
{% endblock %}

{% block script %}

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5jK4WtJObHJwEB0b6efS7FMlXiQxXv1Y&sensor=false"></script>
<script type="text/javascript">
var mapOptions = {
  //center: new google.maps.LatLng(-34.397, 150.644),
  zoom: 8
};
var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
var geocoder = new google.maps.Geocoder();

geocoder.geocode( { "address": "{{store.location}}"}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert('Geocode was not successful for the following reason: ' + status);
  }
});

</script>
{% endblock %}